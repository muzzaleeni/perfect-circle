<!DOCTYPE html>
<html>

<head>
    <title>Drawing App</title>
    <style>
        #canvas {
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="1000" height="600"></canvas>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
        var centralRadius = 5;

        var lastX = 0;
        var lastY = 0;
        var painting = false;

        canvas.addEventListener("mousedown", startPainting);
        canvas.addEventListener("mouseup", stopPainting);
        canvas.addEventListener("mousemove", draw);

        function startPainting() {
            painting = true;
        }

        function stopPainting() {
            painting = false;
            lastX = 0;
            lastY = 0;
        }

        function getMouseCoordinates(event) {
            var rect = canvas.getBoundingClientRect();
            var scaleX = canvas.width / rect.width;
            var scaleY = canvas.height / rect.height;
            var x = (event.clientX - rect.left) * scaleX;
            var y = (event.clientY - rect.top) * scaleY;
            return { x: x, y: y };
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawCentralPoint();
        }

        var centralPointTimeoutSet = false;
        var timeLimitTimeoutSet = false;
        var timeLimitTimeout;

        function restartGame() {
            clearCanvas();
            lastX = 0;
            lastY = 0;
            centralPointTimeoutSet = false;
            timeLimitTimeoutSet = false;
            clearTimeout(timeLimitTimeout);
            timeLimitTimeout = setTimeout(function () {
                alert("Time is up!");
                restartGame();
            }, 5000); // 5 seconds (in milliseconds)
        }

        function draw(event) {
            if (!painting || event.buttons !== 1) return;

            var coordinates = getMouseCoordinates(event);
            var x = coordinates.x;
            var y = coordinates.y;

            ctx.lineWidth = 1;
            ctx.lineCap = "round";
            ctx.imageSmoothingEnabled = false;

            if (lastX === 0 && lastY === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
                ctx.stroke();

                var centralDistance = calculateDistance(x, y, centerX, centerY);
                var centralDistanceCm = 1.5;
                var pixelsToCm = 0.0264583333;
                var centralDistancePixels = centralDistanceCm / pixelsToCm;

                if (centralDistance < centralDistancePixels && !centralPointTimeoutSet) {
                    centralPointTimeoutSet = true;
                    alert("Too close to the central point!");
                    restartGame();
                    return;
                }
            }

            lastX = x;
            lastY = y;
        }

        function calculateDistance(x1, y1, x2, y2) {
            var dx = x2 - x1;
            var dy = y2 - y1;
            return Math.sqrt(dx * dx + dy * dy);
        }

        function drawCentralPoint() {
            ctx.beginPath();
            ctx.arc(centerX, centerY, centralRadius, 0, 2 * Math.PI);
            ctx.fillStyle = "black";
            ctx.fill();
            ctx.closePath();
        }

        drawCentralPoint();
        restartGame();
    </script>
</body>

</html>